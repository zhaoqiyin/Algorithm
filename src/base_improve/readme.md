
### 1. 哈希函数与哈希表

哈希函数特征
1. 输入是无穷的，输出是有限的，md5输出 2^64-1,sha1 2^128-1
2. 同样的输入，产生同样的输出，不随机
3. 不同的输入，也可能产生相同的输出（哈希碰撞）
4. 离散型 均匀性


哈希表
理论上是O(logN),实际上可以做到O(log1),2个条件，
1. N没有那么大，单链表的长度K可以设置稍微大一些
2. 申请扩容时离散申请，就是不占用用户时间（只有JVM上可以实现）

### 2. 布隆过滤器
假如黑名单url是10亿，add search一个url在不在黑名单，没有删除行为

好处是极大的省空间，坏处是有失误率（有可能把白名单误报成黑名单，概率很低）

准备M长度的bit arr，每一个url做k个Hash得到k个值，%m，将对应的bit位置1

对一个新的url，如果做k个Hash，%m后得到k个bit位都是1，就是黑名单用户

n = 样本量 p = 失误率

注意：单样本大小无关

m = -（n * lnp）/(ln2)^2

k = ln2 * m / n 约等于 0.7 * m / n

实际失误率 = (1 - e ^ (- n * k / m)) ^ k

### 3. 一致性哈希

环 虚拟节点 

谷歌改变世界底层技术三驾马车之一

可以参考[一致性哈希详解](https://blog.csdn.net/mrluo735/article/details/134799696)